{% extends "usep_templates/base.html" %}

{% block page_title %}Collections of Greek and Latin Inscriptions in the USA{% endblock page_title %}
			
{% block head_title %}Collections of Greek and Latin Inscriptions in the USA{% endblock head_title %}

{% block list_of_states %}

<!-- this will break when more countries than italy are added -->
  <div id="listofstates">
    <div id="listrow1" style="text-align:left; padding-left:1em;">
      USA:
        {% for code in region_codes %}
         {%if "ITA" not in code %}
      <span><a href="#{{ code|lower }}">{{ code }}</a></span>{% if not forloop.last %} | {% endif %}
      {% endif %}

    {% endfor %}
  </div>
  <div id="listrow2" style="text-align:left;padding-left:1em;">
    OTHER:
    {% for code in region_codes %}
         {%if "ITA" in code %}
      <span ><a href="#{{ code|lower }}">{{ code }}</a></span>{% if not forloop.last %} {% endif %}
      {% endif %}

    {% endfor %}
  </div>
  </div>
{% endblock list_of_states %}



	

{% block content %}


<div class="Scontainer">
 
 
        <iframe src="https://www.google.com/maps/d/u/0/embed?mid=1eoaaaDmkJRXf8MJvnFPg92j89mQTXvFD" width="100%" height="400px"></iframe>
    
  </div>
<div class="Scontainer">


	
		<div class="intro">
			<h2>About</h2>
			<hr>
	<p>The goal of the U.S. Epigraphy Project (USEP) is to collect and share information about ancient Greek and Latin inscriptions preserved in the United States of America.

The Project currently provides access to a database of some 750 Greek and 1,700 Latin inscriptions in the USA through browsing by collection and publication and by searching various categories of metadata (language, date, origin, type, material) and bibliographic information. A growing digital corpus of the collection registers some 400 EpiDoc editions of Latin texts and provides some 1,000 images of the inscriptions registered by the Project, each of which is identified by a unique USEP number based upon its location.

</p>
		</div>

	

</div>
<h3 style="padding-left:1em;
  margin-top:2em;">International Collections</h3>
 <hr>
  <div class="region">


    {% regroup all_collections_dictionaries by region_name as region_list %}  {% comment %} note: no 'end_regroup' {% endcomment %}


    {% for region_name in region_list %}



 {%if "ITA" in region_name.list.0.region_code %}


      {% comment %} ## Region-name with anchor ## {% endcomment %}
      {% for item in region_name.list %}

        {% if forloop.first %}
	  		<div class="subregion">
          <a name="{{ item.region_code|lower }}">
        {% endif %}
      
      {% endfor %}
            <h2>{{ region_name.grouper }}</h2>
          </a>
			<hr>

<div class="descriptioncontainer">
      {% comment %} ## Collections ## {% endcomment %}


      {% for item in region_name.list %}
        <p class="description"> 
        <div class="descriptionLink"> <h3> <a href="../collections/{{ item.collection_code }}/">{{ item.collection_code }}</a></h3></div>
    <div id="address">
          <a target="_blank" href="{{ item.collection_url }}">{{ item.collection_name }}<br/>{{ item.collection_address }}</a>
        </div>
          <div class="js-info">
            <p>{{ item.collection_description|safe }}</p>
          </div>
        </p>
      {% endfor %}
</div>
	  </div>
       {% endif %}
    {% endfor %}

   </div>

         <h3 style="padding-left:1em;
  margin-top:2em;">American Collections</h3>
           <hr>
   <div class="region">

    
    

 
       {% for region_name in region_list %}
 {%if "ITA" not in region_name.list.0.region_code %}
      {% comment %} ## Region-name with anchor ## {% endcomment %}
      {% for item in region_name.list %}

        {% if forloop.first %}
        <div class="subregion">
         <div class="headerbox"> 
          <a name="{{ item.region_code|lower }}">
          <div class="excol"></div>
        {% endif %}
      {% endfor %}
          
            <h2>{{ region_name.grouper }}</h2>
          
          </a>
      <hr>
    </div>

      {% comment %} ## Collections ## {% endcomment %}
      {% for item in region_name.list %}
      {% if forloop.first %}
        <p class="description"> 
        <div class="descriptionLink"> <h3> <a href="../collections/{{ item.collection_code }}/">{{ item.collection_code }}</a></h3></div>
    <div id="address">
          <a target="_blank" href="{{ item.collection_url }}">{{ item.collection_name }}<br/>{{ item.collection_address }}</a>
        </div>
          <div class="js-info">
            <p>{{ item.collection_description|safe }}</p>
          </div>
        </p>
        <div class="descriptioncontainer">
        {% else %}
            <p class="description"> 
        <div class="descriptionLink"> <h3> <a href="../collections/{{ item.collection_code }}/">{{ item.collection_code }}</a></h3></div>
    <div id="address">
          <a target="_blank" href="{{ item.collection_url }}">{{ item.collection_name }}<br/>{{ item.collection_address }}</a>
        </div>
          <div class="js-info">
            <p>{{ item.collection_description|safe }}</p>
          </div>
        </p>
        {% endif %}


      {% endfor %}

</div>
    </div>
       {% endif %}

    {% endfor %}


    <!-- end region output -->

  </div> <!-- end div class="region" -->
  <div id="admin" style="position: absolute; right: 10px;"><a href="{{ login_url }}">admin</div>
{% endblock content %}

{% block page_js %}
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.3.min.js"></script>
  <script type="text/javascript">
    function showInfo () {
      var el = $(this);
      el.parent().next('.js-info').toggle('fast', 'swing');
      return false;
    }

    $(document).ready(function() {
      if (window.location.hash !== '#showall') {
        $('.js-info').hide();
      }
      $('.js-link').click(showInfo);

      $('#showall').click(function(event) {
        $('.js-info').show();
      });
    });
  </script>

<script type="text/javascript">

var region = document.getElementsByClassName("region");
var collections = region.item(1).getElementsByClassName("descriptioncontainer");
//removing italian collection b/c it messes up the iterating

col = [];

for(var i = 0; i < collections.length; i++)
{
     var titles = document.getElementsByClassName("headerbox");
   console.log(collections.item(i));
    $(collections.item(i)).attr("id", "col-" + i);

    col[i] = "#col-" + i;

    var fullHeight =  $(col[i]).height();
     
//console.log(col[i], fullHeight);
    if ((fullHeight > 100)){
   //     $(col[i]).after("...")
       console.log(fullHeight);
        $(col[i]).hide();
       $(titles[i]).append('<a><h2><div class="expand">+</div></h2></a>');
       $(titles[i]).css({cursor:'pointer'});
       $(titles[i]).children().hover(function(){
            $(this).css({color: '#4b7975'});
              }, function(){
            $(this).css({ color: '#000' });
                   });

    }



  }



$(".headerbox > a > h2").click(function () {
  var rotation = 0;
    $header = $(this);
    //getting the next element
    $content = $(this).parent().parent().next().next().next().next().next().next();
    
    //open up the content needed - toggle the slide- if visible, slide up, if not slidedown.
    $content.slideToggle(500, function () {
    
      
    rotation += 80;
    console.log($header.siblings(".expand"));
  //  $header.parent().next().next().children().children().last().css({'transform' : 'rotate('+ 45 +'deg)'});
     $header.next().hide();

       $header.parent().next().next().children().children().last().text(function (){
            return $content.is(":visible") ? "-" : "+";
       })


              //execute this after slideToggle is done
        //change text of header based on visibility of content div
        // $header..text(function () {
        //     //change text based on condition
        //     return $content.is(":visible") ? "Collapse" : "Expand";
        // });
    });

});
  </script>


{% endblock page_js %}
